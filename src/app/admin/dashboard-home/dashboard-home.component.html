<div class="dashboard-container">
  
  <!-- Dashboard Header -->
  <div class="dashboard-header">
    <div class="header-content">
      <h1>Welcome to Admin Dashboard</h1>
      <p>Monitor and manage all your sofa service operations from one place</p>
    </div>
  </div>

  <!-- Stats Cards Grid -->
  <div class="stats-grid">
    
    <!-- Total Bookings -->
    <div class="stat-card">
      <div class="stat-content">
        <div class="stat-icon">
          <mat-icon>event_note</mat-icon>
        </div>
        <div class="stat-info">
          <h3>{{dashboardStats.totalBookings}}</h3>
          <p>Total Bookings</p>
          <div class="stat-trend trend-up" *ngIf="dashboardStats.totalBookings > 0">
            <mat-icon>trending_up</mat-icon>
            All Time
          </div>
        </div>
      </div>
    </div>

    <!-- Pending Bookings -->
    <div class="stat-card">
      <div class="stat-content">
        <div class="stat-icon">
          <mat-icon>pending_actions</mat-icon>
        </div>
        <div class="stat-info">
          <h3>{{dashboardStats.pendingBookings}}</h3>
          <p>Pending Bookings</p>
          <div class="stat-trend" *ngIf="dashboardStats.pendingBookings > 0">
            <mat-icon>schedule</mat-icon>
            Needs Attention
          </div>
        </div>
      </div>
    </div>

    <!-- Confirmed Bookings -->
    <div class="stat-card">
      <div class="stat-content">
        <div class="stat-icon">
          <mat-icon>verified</mat-icon>
        </div>
        <div class="stat-info">
          <h3>{{dashboardStats.confirmedBookings}}</h3>
          <p>Confirmed Bookings</p>
          <div class="stat-trend trend-up" *ngIf="dashboardStats.confirmedBookings > 0">
            <mat-icon>check_circle</mat-icon>
            Ready for Service
          </div>
        </div>
      </div>
    </div>

    <!-- Cancelled Bookings -->
    <div class="stat-card">
      <div class="stat-content">
        <div class="stat-icon">
          <mat-icon>cancel</mat-icon>
        </div>
        <div class="stat-info">
          <h3>{{dashboardStats.cancelledBookings}}</h3>
          <p>Cancelled Bookings</p>
          <div class="stat-trend trend-down" *ngIf="dashboardStats.cancelledBookings > 0">
            <mat-icon>trending_down</mat-icon>
            Refund/Reschedule
          </div>
        </div>
      </div>
    </div>

    <!-- Today's Bookings -->
    <div class="stat-card">
      <div class="stat-content">
        <div class="stat-icon">
          <mat-icon>today</mat-icon>
        </div>
        <div class="stat-info">
          <h3>{{dashboardStats.todaysBookings}}</h3>
          <p>Today's Bookings</p>
          <div class="stat-trend trend-up" *ngIf="dashboardStats.todaysBookings > 0">
            <mat-icon>calendar_today</mat-icon>
            {{dashboardStats.todaysBookings}} Scheduled
          </div>
        </div>
      </div>
    </div>

    <!-- Monthly Revenue -->
    <div class="stat-card">
      <div class="stat-content">
        <div class="stat-icon">
          <mat-icon>paid</mat-icon>
        </div>
        <div class="stat-info">
          <h3>₹{{dashboardStats.monthlyRevenue | number:'1.0-0'}}</h3>
          <p>Monthly Revenue</p>
          <div class="stat-trend trend-up" *ngIf="dashboardStats.monthlyRevenue > 0">
            <mat-icon>attach_money</mat-icon>
            From Completed Bookings
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Main Content Grid -->
  <div class="content-grid">
    
    <!-- Recent Bookings Card -->
    <div class="recent-bookings-card">
      
      <!-- Card Header -->
      <div class="card-header">
        <h2>
          <mat-icon>receipt_long</mat-icon>
          Recent Bookings
        </h2>
        <button 
          mat-raised-button 
          class="refresh-btn" 
          (click)="refreshRecent()"
        >
          <mat-icon>refresh</mat-icon>
          Refresh List
        </button>
      </div>

      <!-- Card Content -->
      <div class="card-content">
        <div class="table-container">
          <table mat-table [dataSource]="recentBookings" class="bookings-table mat-elevation-z0">
            
            <!-- Customer Column -->
            <ng-container matColumnDef="customer">
              <th mat-header-cell *matHeaderCellDef>Customer</th>
              <td mat-cell *matCellDef="let booking">
                <div class="customer-cell">
                  <div class="customer-avatar">{{ getInitials(booking.name || booking.customerName || '?') }}</div>
                  <div class="customer-details">
                    <div class="customer-name">{{ booking.name || booking.customerName || 'N/A' }}</div>
                    <div class="customer-phone">{{ booking.phone || booking.customerPhone || 'No Phone' }}</div>
                  </div>
                </div>
              </td>
            </ng-container>

            <!-- Service Column -->
            <ng-container matColumnDef="service">
              <th mat-header-cell *matHeaderCellDef>Service</th>
              <td mat-cell *matCellDef="let booking">
                <div class="service-cell">
                  <div class="service-name">{{ getServiceName(booking.service) }}</div>
                  <div class="service-meta">
                    
                  </div>
                </div>
              </td>
            </ng-container>

            <!-- Date Column -->
            <ng-container matColumnDef="date">
              <th mat-header-cell *matHeaderCellDef>Date</th>
              <td mat-cell *matCellDef="let booking">
                <div class="date-cell">
                  <mat-icon>event</mat-icon>
                  {{ (booking.date || booking.createdAt) | date: 'dd/MM/yyyy' }}
                </div>
              </td>
            </ng-container>

            <!-- Status Column -->
            <ng-container matColumnDef="status">
              <th mat-header-cell *matHeaderCellDef>Status</th>
              <td mat-cell *matCellDef="let booking">
                <span class="status-badge" [ngClass]="getStatusClass(booking.status)">
                  {{ booking.status | titlecase }}
                </span>
              </td>
            </ng-container>

            <!-- Amount Column -->
            <ng-container matColumnDef="amount">
              <th mat-header-cell *matHeaderCellDef>Amount</th>
              <td mat-cell *matCellDef="let booking">
                <div class="amount-cell" [ngClass]="{
                  'amount-pending': booking.status === 'PENDING',
                  'amount-cancelled': booking.status === 'CANCELLED'
                }">
                  ₹{{ getBookingPrice(booking) | number:'1.0-2' }}
                </div>
              </td>
            </ng-container>

            <!-- Header Row -->
            <tr mat-header-row *matHeaderRowDef="['customer', 'service', 'date', 'status', 'amount']" 
                class="table-header-row"></tr>
            
            <!-- Data Rows -->
            <tr mat-row *matRowDef="let row; columns: ['customer', 'service', 'date', 'status', 'amount'];" 
                class="table-row"></tr>
            
            <!-- Empty State -->
            <tr *ngIf="recentBookings.length === 0">
              <td colspan="5">
                <div class="empty-state">
                  <mat-icon class="empty-icon">event_busy</mat-icon>
                  <h3>No Recent Bookings</h3>
                  <p>No bookings have been made yet</p>
                </div>
              </td>
            </tr>

          </table>
        </div>
      </div>

    </div>

  </div>

</div>